## ①開発環境構築のベース作成にCodeStarを利用する

* CodeStarにアクセス

https://ap-northeast-1.console.aws.amazon.com/codestar/home?region=ap-northeast-1#/quickstart/details?category=webservice&compute=lambda&framework=nodeexpress

## ②CodeStarの設定を進める(基本的にボタンをポチポチするだけ)

* Githubに接続する

![](https://camo.qiitausercontent.com/b1dfe7fc702d35a536d1ada643437356783af7ab/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3132313836302f33393732396637652d626234332d336335632d616166642d3761653066346639336139652e706e67)

* プロジェクトを作成する

![](https://camo.qiitausercontent.com/c7a942969d7d3bc01f1b5776a80181c8457dbeff/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3132313836302f66656235656234622d613063312d633564392d636536662d6162626235313334333239332e706e67)

* 次へ

![](https://camo.qiitausercontent.com/446e7ed8fe787bc5708e5ef52a8545fe26164482/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3132313836302f36383862633933622d616362382d643438382d303535642d3666396162396635666232382e706e67)

* CodeStarのプロジェクトが作成されました。裏で自動的に設定がされていきますのでしばらく待ちます。

![](https://camo.qiitausercontent.com/b8043098fcc0646a78cd9aa78ac2d48c96c0535f/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3132313836302f65303135663637312d316639662d363164322d623738392d6138613530343265326231302e706e67)

* 自動的にCI/CDの環境が構築された

![](https://camo.qiitausercontent.com/d60bf59882ab0ca0ed92b1402cbaf04b5e02e009/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3132313836302f38623261663532372d303061362d306666622d646635352d3833376135383364643235342e706e67)

## ③少し設定をしないといけないところ

### CodeBuild

* プロジェクトの編集をクリック

![](https://camo.qiitausercontent.com/b47f47b2566522abd74950898894a0ece796d939/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3132313836302f64373365323839642d663965612d306462632d393131382d3262383130643033656262612e706e67)

* ランタイムのバージョンをnodejs:8.11.0に変更

![](https://camo.qiitausercontent.com/5aa8a7addfabea70d14268a9cc52f8ffb8c3b913/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3132313836302f39643137376539652d663130342d376166662d363931382d6236336236323730396238332e706e67)

### Lambda

* 環境変数を設定

![](https://camo.qiitausercontent.com/4bd65affcee7381e3dff927205c88420896599b4/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3132313836302f66363964663731302d353231622d336139302d356336362d3663376536383663633330642e706e67)

## ④プロジェクトのファイルをこのリポジトリのものと差し替える

### 下記の設定ファイルでコントロールできる

* buildspec.yml
  * ビルド、テスト実行など
  
* template.yml
  * デプロイ設定の調整

## ⑤エンドポイントの取得

* Lambdaの設定画面に記載されているエンドポイントの情報を取得

![](https://camo.qiitausercontent.com/1e1703aa19c02b4bbdfab91830d392b78d6fc00b/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3132313836302f61626561613366332d353535312d373263382d626335332d6361613333386538383963392e706e67)

![](https://camo.qiitausercontent.com/d3f8921d82a0ab6b2e88161b75900bc33d9e9b02/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f3132313836302f38323731383632372d343666342d376137342d663031642d3861623364626166323838652e706e67)

## ⑥最後に

* コードを修正してcommit & push するだけでLambdaにデプロイされるようになります。
